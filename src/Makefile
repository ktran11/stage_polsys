CFLAGS = -std=c11 -Wall -Wextra
CPPFLAGS = -I/usr/local/include/flint -I/usr/local/include/ -I../include
LDFLAGS = -L/usr/local/lib -lflint -lgmp -lmpfr -lpthread

all: test 

test: main.o m_basis.o basis.o matpol.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

pm_basis.o: pm_basis.c
	$(CC) $(CFLAGS) $(LDFLAGS) $(CPPFLAGS) -c $< 

main.o: main.c

matpol.o: matpol.c 
	$(CC) $(CFLAGS) $(LDFLAGS) $(CPPFLAGS) -c $< 

basis.o: basis.c
	$(CC) $(CFLAGS) $(LDFLAGS) $(CPPFLAGS) -c $< 

m_basis.o: m_basis.c
	$(CC) $(CFLAGS) $(LDFLAGS) $(CPPFLAGS) -c $< 

clean:
	@rm -f *~ *.o test 
help:
	@echo "Usage:"
	@echo "  make [all] \t\t Run the whole build of matpol"
	@echo "  make matpol \t\t Build the executable file from matpol.c"
	@echo "  make clean \t\t Remove all files generated by make"
	@echo "  make help \t\t Display this help"

.PHONY: all clean help
